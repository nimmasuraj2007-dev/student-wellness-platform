<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare - AI Wellness Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --danger-gradient: linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%);
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 15px 50px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: var(--primary-gradient);
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #fff, #e8f4fd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .ai-badge {
            display: inline-block;
            background: var(--success-gradient);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: var(--shadow-light);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .left-column {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow-heavy);
            animation: fadeInUp 0.8s ease-out;
            transition: all 0.3s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            color: white;
        }

        .card-header h2 {
            font-size: 1.8rem;
            margin-left: 10px;
        }

        .card-icon {
            font-size: 2rem;
            background: var(--secondary-gradient);
            padding: 15px;
            border-radius: 15px;
            box-shadow: var(--shadow-light);
        }

        .mood-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .mood-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 20px 15px;
            cursor: pointer;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 14px;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .mood-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--success-gradient);
            transition: left 0.4s ease;
            z-index: -1;
        }

        .mood-btn:hover::before {
            left: 0;
        }

        .mood-btn:hover {
            color: white;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .mood-btn.selected {
            background: var(--success-gradient);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .emoji {
            font-size: 2.5rem;
            display: block;
            margin-bottom: 8px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }

        .mood-btn.selected .emoji {
            animation: spin 1s ease-in-out;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg) scale(1);
            }

            to {
                transform: rotate(360deg) scale(1.2);
            }
        }

        .form-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: white;
            font-size: 1.1rem;
        }

        .slider-container {
            position: relative;
            margin: 15px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: var(--success-gradient);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-value {
            position: absolute;
            right: 0;
            top: -35px;
            background: var(--secondary-gradient);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
            box-shadow: var(--shadow-light);
        }

        .thoughts-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            resize: vertical;
            min-height: 100px;
            transition: all 0.3s ease;
        }

        .thoughts-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .thoughts-input:focus {
            outline: none;
            border-color: #4facfe;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
        }

        .submit-btn {
            background: var(--success-gradient);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--success-gradient);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-light);
        }

        .metric-value {
            font-size: 3rem;
            font-weight: bold;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            animation: countUp 2s ease-out;
        }

        @keyframes countUp {
            from {
                opacity: 0;
                transform: scale(0.5);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .metric-label {
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            height: 400px;
            position: relative;
        }

        .wellness-tips {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tip-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid transparent;
            background-image: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)),
                var(--success-gradient);
            background-origin: border-box;
            background-clip: content-box, border-box;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .tip-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(79, 172, 254, 0.1), transparent);
            transition: left 0.6s ease;
        }

        .tip-card:hover::before {
            left: 100%;
        }

        .tip-card:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow-light);
        }

        .history-section {
            max-height: 400px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
        }

        .history-section::-webkit-scrollbar {
            width: 8px;
        }

        .history-section::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .history-section::-webkit-scrollbar-thumb {
            background: var(--success-gradient);
            border-radius: 4px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #4facfe;
            transition: all 0.3s ease;
            animation: slideInLeft 0.5s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .history-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .alert {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 12px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            animation: slideInRight 0.5s ease-out;
            box-shadow: var(--shadow-heavy);
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .alert.success {
            background: var(--success-gradient);
        }

        .alert.warning {
            background: var(--warning-gradient);
        }

        .alert.info {
            background: var(--secondary-gradient);
        }

        .alert.danger {
            background: var(--danger-gradient);
        }

        .sentiment-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .sentiment-positive {
            background: var(--success-gradient);
            color: white;
        }

        .sentiment-negative {
            background: var(--warning-gradient);
            color: white;
        }

        .sentiment-neutral {
            background: rgba(108, 117, 125, 0.8);
            color: white;
        }

        .ai-insight {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 4px solid #4facfe;
            position: relative;
            overflow: hidden;
        }

        .ai-insight::before {
            content: '🤖';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            opacity: 0.7;
        }

        .delete-btn {
            background: var(--danger-gradient);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 50px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .delete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.2);
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* Modal styles for confirmation */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 450px;
            width: 90%;
            box-shadow: var(--shadow-heavy);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-icon {
            font-size: 2rem;
            margin-right: 15px;
            color: #ff758c;
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--text-primary);
        }

        .modal-content {
            margin-bottom: 25px;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .modal-btn {
            padding: 10px 25px;
            border-radius: 50px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.cancel {
            background: #f1f2f6;
            color: var(--text-secondary);
        }

        .modal-btn.cancel:hover {
            background: #e2e6ee;
        }

        .modal-btn.confirm {
            background: var(--danger-gradient);
            color: white;
        }

        .modal-btn.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.2);
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .container {
                padding: 15px;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .delete-btn {
                align-self: flex-end;
            }
        }
    </style>
</head>

<body>
    <div class="background-animation">
        <div class="floating-particles"></div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmationModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-icon">⚠️</div>
                <h3 class="modal-title">Delete All History</h3>
            </div>
            <div class="modal-content">
                <p>Are you sure you want to delete all your wellness history? This action cannot be undone and all your
                    check-in data will be permanently removed.</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="closeModal()">Cancel</button>
                <button class="modal-btn confirm" onclick="confirmDelete()">Delete All History</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>🧠 MindCare AI</h1>
            <p>Advanced AI-Powered Mental Health Companion</p>
            <div class="ai-badge">✨ Powered by Advanced AI Analytics</div>
        </div>

        <div class="main-grid">
            <div class="left-column">
                <div class="glass-card">
                    <div class="card-header">
                        <div class="card-icon">📊</div>
                        <h2>Daily Wellness Check-in</h2>
                    </div>

                    <div id="alert-container"></div>

                    <div class="mood-grid">
                        <div class="mood-btn" data-mood="excellent" data-score="10">
                            <span class="emoji">🌟</span>
                            Excellent
                        </div>
                        <div class="mood-btn" data-mood="good" data-score="8">
                            <span class="emoji">😊</span>
                            Good
                        </div>
                        <div class="mood-btn" data-mood="okay" data-score="6">
                            <span class="emoji">😐</span>
                            Okay
                        </div>
                        <div class="mood-btn" data-mood="low" data-score="4">
                            <span class="emoji">😔</span>
                            Low
                        </div>
                        <div class="mood-btn" data-mood="stressed" data-score="3">
                            <span class="emoji">😰</span>
                            Stressed
                        </div>
                        <div class="mood-btn" data-mood="anxious" data-score="2">
                            <span class="emoji">😟</span>
                            Anxious
                        </div>
                    </div>

                    <div class="form-section">
                        <div class="form-group">
                            <label>Sleep Quality Assessment</label>
                            <div class="slider-container">
                                <input type="range" id="sleepQuality" class="slider" min="1" max="10" value="7">
                                <div class="slider-value" id="sleepValue">7</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Stress Level Indicator</label>
                            <div class="slider-container">
                                <input type="range" id="stressLevel" class="slider" min="1" max="10" value="5">
                                <div class="slider-value" id="stressValue">5</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Energy Level</label>
                            <div class="slider-container">
                                <input type="range" id="energyLevel" class="slider" min="1" max="10" value="6">
                                <div class="slider-value" id="energyValue">6</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Share Your Thoughts & Feelings</label>
                            <textarea id="dailyThoughts" class="thoughts-input"
                                placeholder="Tell me about your day, any challenges you're facing, or what made you smile today..."></textarea>
                        </div>

                        <button class="submit-btn" onclick="submitCheckIn()">
                            🚀 Submit Wellness Check-in
                        </button>
                    </div>
                </div>
            </div>

            <div class="right-column">
                <div class="glass-card">
                    <div class="card-header">
                        <div class="card-icon">📈</div>
                        <h2>AI Analytics Dashboard</h2>
                    </div>

                    <div class="dashboard">
                        <div class="metric-card">
                            <div class="metric-value" id="avgMood">7.2</div>
                            <div class="metric-label">Mood Score</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="checkInStreak">5</div>
                            <div class="metric-label">Day Streak</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="avgSleep">6.8</div>
                            <div class="metric-label">Sleep Quality</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="avgStress">4.2</div>
                            <div class="metric-label">Stress Level</div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="wellnessChart"></canvas>
                    </div>
                </div>

                <div class="glass-card">
                    <div class="card-header">
                        <div class="card-icon">🤖</div>
                        <h2>AI-Powered Insights</h2>
                    </div>

                    <div class="wellness-tips" id="wellnessTips">
                        <div class="tip-card">
                            <strong>🧘 AI Recommendation:</strong> Based on your patterns, try the 4-7-8 breathing
                            technique when stress peaks.
                        </div>
                    </div>

                    <div id="aiInsight" class="ai-insight" style="display: none;">
                        <strong>🔮 Predictive Analysis:</strong>
                        <p id="insightText"></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-card">
            <div class="card-header">
                <div class="card-icon">📅</div>
                <h2>Wellness Journey History</h2>
                <button id="deleteHistoryBtn" class="delete-btn" onclick="showDeleteConfirmation()">
                    🗑️ Delete History
                </button>
            </div>
            <div class="history-section" id="checkInHistory">
                <p style="text-align: center; color: rgba(255,255,255,0.7); padding: 40px;">
                    Start your wellness journey today! 🌟
                </p>
            </div>
        </div>
    </div>

    <script>
        let selectedMood = null;
        let checkInData = JSON.parse(localStorage.getItem('mindcare_checkins')) || [];
        let userStats = JSON.parse(localStorage.getItem('mindcare_stats')) || {
            streak: 0,
            totalCheckIns: 0,
            avgMood: 0,
            avgSleep: 0,
            avgStress: 0,
            avgEnergy: 0
        };
        let wellnessChart = null;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function () {
            createFloatingParticles();
            updateSliderValues();
            loadCheckInHistory();
            updateDashboard();
            generatePersonalizedTips();
            checkDailyCheckIn();
            initializeChart();
        });

        // Create floating background particles
        function createFloatingParticles() {
            const container = document.querySelector('.floating-particles');
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = (Math.random() * 10 + 5) + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                container.appendChild(particle);
            }
        }

        // Enhanced mood selection with animations
        document.querySelectorAll('.mood-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedMood = {
                    mood: this.dataset.mood,
                    score: parseInt(this.dataset.score)
                };

                // Add selection animation
                this.style.transform = 'scale(1.1) rotate(5deg)';
                setTimeout(() => {
                    this.style.transform = 'scale(1.1)';
                }, 200);
            });
        });

        // Enhanced slider functionality
        function updateSliderValues() {
            const sliders = ['sleepQuality', 'stressLevel', 'energyLevel'];

            sliders.forEach(sliderId => {
                const slider = document.getElementById(sliderId);
                const valueDisplay = document.getElementById(sliderId.replace('Quality', 'Value').replace('Level', 'Value'));

                slider.addEventListener('input', function () {
                    valueDisplay.textContent = this.value;
                    updateSliderGradient(this);
                });

                updateSliderGradient(slider);
            });
        }

        function updateSliderGradient(slider) {
            const value = (slider.value - slider.min) / (slider.max - slider.min) * 100;
            slider.style.background = `linear-gradient(to right, #4facfe 0%, #00f2fe ${value}%, rgba(255,255,255,0.3) ${value}%)`;
        }

        // Advanced sentiment analysis
        function performAdvancedSentimentAnalysis(text) {
            const positiveWords = [
                'happy', 'good', 'great', 'excellent', 'amazing', 'wonderful', 'excited', 'grateful',
                'love', 'joy', 'awesome', 'fantastic', 'brilliant', 'perfect', 'beautiful',
                'successful', 'accomplished', 'proud', 'confident', 'optimistic', 'peaceful'
            ];

            const negativeWords = [
                'sad', 'bad', 'terrible', 'awful', 'stressed', 'worried', 'anxious', 'depressed',
                'hate', 'angry', 'frustrated', 'disappointed', 'lonely', 'tired', 'exhausted',
                'overwhelmed', 'confused', 'scared', 'nervous', 'upset', 'hurt'
            ];

            const intensifiers = ['very', 'extremely', 'really', 'quite', 'super', 'totally'];
            const negators = ['not', 'never', 'no', 'nothing', 'nobody', 'nowhere'];

            const words = text.toLowerCase().split(/\W+/);
            let score = 0;
            let wordCount = 0;

            for (let i = 0; i < words.length; i++) {
                const word = words[i];
                let multiplier = 1;

                // Check for intensifiers
                if (i > 0 && intensifiers.includes(words[i - 1])) {
                    multiplier = 1.5;
                }

                // Check for negators
                if (i > 0 && negators.includes(words[i - 1])) {
                    multiplier = -1;
                }

                if (positiveWords.includes(word)) {
                    score += 1 * multiplier;
                    wordCount++;
                } else if (negativeWords.includes(word)) {
                    score -= 1 * multiplier;
                    wordCount++;
                }
            }

            // Calculate sentiment with confidence
            const normalizedScore = wordCount > 0 ? score / wordCount : 0;
            const confidence = Math.min(wordCount / 5, 1); // Higher confidence with more sentiment words

            let sentiment, intensity;
            if (normalizedScore > 0.3) {
                sentiment = 'positive';
                intensity = normalizedScore > 0.6 ? 'high' : 'medium';
            } else if (normalizedScore < -0.3) {
                sentiment = 'negative';
                intensity = normalizedScore < -0.6 ? 'high' : 'medium';
            } else {
                sentiment = 'neutral';
                intensity = 'low';
            }

            return { sentiment, intensity, score: normalizedScore, confidence };
        }

        // Submit check-in with enhanced processing
        function submitCheckIn() {
            if (!selectedMood) {
                showAlert('Please select your current mood first! 🎯', 'warning');
                return;
            }

            const thoughts = document.getElementById('dailyThoughts').value;
            const sentimentAnalysis = performAdvancedSentimentAnalysis(thoughts);

            const checkIn = {
                id: Date.now(),
                date: new Date().toISOString(),
                mood: selectedMood.mood,
                moodScore: selectedMood.score,
                sleepQuality: parseInt(document.getElementById('sleepQuality').value),
                stressLevel: parseInt(document.getElementById('stressLevel').value),
                energyLevel: parseInt(document.getElementById('energyLevel').value),
                thoughts: thoughts,
                sentiment: sentimentAnalysis,
                timestamp: Date.now()
            };

            checkInData.unshift(checkIn);
            if (checkInData.length > 50) checkInData.splice(50); // Keep last 50 entries

            localStorage.setItem('mindcare_checkins', JSON.stringify(checkInData));

            updateUserStats();
            updateDashboard();
            loadCheckInHistory();
            generatePersonalizedTips();
            generateAIInsight();
            updateChart();

            showAlert('🎉 Check-in processed successfully! AI analysis complete.', 'success');
            resetForm();
        }

        // Generate AI insights based on patterns
        function generateAIInsight() {
            if (checkInData.length < 3) return;

            const recentData = checkInData.slice(0, 7);
            const avgMood = recentData.reduce((sum, entry) => sum + entry.moodScore, 0) / recentData.length;
            const avgStress = recentData.reduce((sum, entry) => sum + entry.stressLevel, 0) / recentData.length;
            const trendDirection = checkInData[0].moodScore - checkInData[Math.min(checkInData.length - 1, 6)].moodScore;

            let insight = '';
            let prediction = '';

            if (avgStress > 7 && avgMood < 6) {
                insight = 'High stress levels detected with declining mood. ';
                prediction = 'Consider implementing stress-reduction techniques in the next 2-3 days to prevent burnout.';
            } else if (trendDirection > 2) {
                insight = 'Positive trend detected in your wellness journey! ';
                prediction = 'Keep up the good work. Your current habits are contributing to improved mental health.';
            } else if (avgMood > 7 && avgStress < 4) {
                insight = 'Excellent wellness balance maintained. ';
                prediction = 'You\'re in a great mental space. Focus on maintaining current lifestyle patterns.';
            } else {
                insight = 'Stable wellness patterns observed. ';
                prediction = 'Small adjustments to sleep or stress management could enhance your overall well-being.';
            }

            const insightContainer = document.getElementById('aiInsight');
            const insightText = document.getElementById('insightText');
            insightText.textContent = insight + prediction;
            insightContainer.style.display = 'block';
        }

        // Update user statistics with advanced calculations
        function updateUserStats() {
            userStats.totalCheckIns = checkInData.length;

            if (checkInData.length > 0) {
                userStats.avgMood = (checkInData.reduce((sum, entry) => sum + entry.moodScore, 0) / checkInData.length).toFixed(1);
                userStats.avgSleep = (checkInData.reduce((sum, entry) => sum + entry.sleepQuality, 0) / checkInData.length).toFixed(1);
                userStats.avgStress = (checkInData.reduce((sum, entry) => sum + entry.stressLevel, 0) / checkInData.length).toFixed(1);
                userStats.avgEnergy = (checkInData.reduce((sum, entry) => sum + entry.energyLevel, 0) / checkInData.length).toFixed(1);
            }

            userStats.streak = calculateAdvancedStreak();
            localStorage.setItem('mindcare_stats', JSON.stringify(userStats));
        }

        // Advanced streak calculation
        function calculateAdvancedStreak() {
            if (checkInData.length === 0) return 0;

            let streak = 1;
            let currentDate = new Date(checkInData[0].date);

            for (let i = 1; i < checkInData.length; i++) {
                const previousDate = new Date(checkInData[i].date);
                const diffTime = currentDate.getTime() - previousDate.getTime();
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays === 1) {
                    streak++;
                    currentDate = previousDate;
                } else if (diffDays === 0) {
                    // Same day, continue
                    continue;
                } else {
                    break;
                }
            }

            return streak;
        }

        // Initialize Chart.js visualization
        function initializeChart() {
            const ctx = document.getElementById('wellnessChart').getContext('2d');

            wellnessChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Mood Score',
                        data: [],
                        borderColor: '#4facfe',
                        backgroundColor: 'rgba(79, 172, 254, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Sleep Quality',
                        data: [],
                        borderColor: '#00f2fe',
                        backgroundColor: 'rgba(0, 242, 254, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Stress Level',
                        data: [],
                        borderColor: '#fa709a',
                        backgroundColor: 'rgba(250, 112, 154, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Wellness Trends (Last 7 Days)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    }
                }
            });

            updateChart();
        }

        // Update chart with latest data
        function updateChart() {
            if (!wellnessChart) return;

            const recentData = checkInData.slice(0, 7).reverse();
            const labels = recentData.map(entry => {
                const date = new Date(entry.date);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            });

            wellnessChart.data.labels = labels;
            wellnessChart.data.datasets[0].data = recentData.map(entry => entry.moodScore);
            wellnessChart.data.datasets[1].data = recentData.map(entry => entry.sleepQuality);
            wellnessChart.data.datasets[2].data = recentData.map(entry => entry.stressLevel);

            wellnessChart.update();
        }

        // Enhanced dashboard updates with animations
        function updateDashboard() {
            const metrics = [
                { id: 'avgMood', value: userStats.avgMood || '0', suffix: '' },
                { id: 'checkInStreak', value: userStats.streak || '0', suffix: '' },
                { id: 'avgSleep', value: userStats.avgSleep || '0', suffix: '' },
                { id: 'avgStress', value: userStats.avgStress || '0', suffix: '' }
            ];

            metrics.forEach(metric => {
                const element = document.getElementById(metric.id);
                animateNumber(element, parseFloat(metric.value), 2000);
            });
        }

        // Number animation for metrics
        function animateNumber(element, targetValue, duration) {
            const startValue = parseFloat(element.textContent) || 0;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsedTime = currentTime - startTime;
                const progress = Math.min(elapsedTime / duration, 1);

                const easedProgress = 1 - Math.pow(1 - progress, 3); // Ease out cubic
                const currentValue = startValue + (targetValue - startValue) * easedProgress;

                element.textContent = currentValue.toFixed(1);

                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }

            requestAnimationFrame(update);
        }

        // Generate advanced personalized tips
        function generatePersonalizedTips() {
            const tips = [];
            const recentEntries = checkInData.slice(0, 5);

            if (recentEntries.length === 0) {
                tips.push({
                    icon: '🌟',
                    type: 'Welcome',
                    tip: 'Welcome to MindCare AI! Start tracking your wellness journey today.',
                    priority: 'high'
                });
            } else {
                // Analyze patterns and generate tips
                const avgStress = recentEntries.reduce((sum, entry) => sum + entry.stressLevel, 0) / recentEntries.length;
                const avgSleep = recentEntries.reduce((sum, entry) => sum + entry.sleepQuality, 0) / recentEntries.length;
                const avgMood = recentEntries.reduce((sum, entry) => sum + entry.moodScore, 0) / recentEntries.length;

                if (avgStress > 7) {
                    tips.push({
                        icon: '🧘',
                        type: 'Stress Management',
                        tip: 'AI detected high stress levels. Try the 5-4-3-2-1 grounding technique: 5 things you see, 4 you hear, 3 you touch, 2 you smell, 1 you taste.',
                        priority: 'high'
                    });
                }

                if (avgSleep < 6) {
                    tips.push({
                        icon: '💤',
                        type: 'Sleep Optimization',
                        tip: 'Sleep quality analysis suggests room for improvement. Create a wind-down routine 1 hour before bed.',
                        priority: 'high'
                    });
                }

                if (avgMood < 5) {
                    tips.push({
                        icon: '🌈',
                        type: 'Mood Enhancement',
                        tip: 'Mood patterns indicate potential low periods. Consider connecting with friends or engaging in creative activities.',
                        priority: 'medium'
                    });
                }

                // Positive reinforcement
                if (avgMood > 7 && avgStress < 5) {
                    tips.push({
                        icon: '🎯',
                        type: 'Wellness Champion',
                        tip: 'Excellent wellness balance! Your current strategies are working great. Keep it up!',
                        priority: 'low'
                    });
                }

                // Activity suggestions based on sentiment
                const recentSentiments = recentEntries.map(entry => entry.sentiment?.sentiment).filter(Boolean);
                const negativeCount = recentSentiments.filter(s => s === 'negative').length;

                if (negativeCount > 2) {
                    tips.push({
                        icon: '🏃',
                        type: 'Activity Boost',
                        tip: 'AI sentiment analysis suggests physical activity could help. Try a 10-minute walk or light stretching.',
                        priority: 'medium'
                    });
                }
            }

            // Add general wellness tips if no specific issues
            if (tips.filter(t => t.priority === 'high').length === 0) {
                const generalTips = [
                    { icon: '🍃', type: 'Mindfulness', tip: 'Practice mindful breathing for 3 minutes daily to reduce anxiety and improve focus.' },
                    { icon: '📚', type: 'Learning', tip: 'Engage in learning something new for 15 minutes daily to boost cognitive health.' },
                    { icon: '🎵', type: 'Music Therapy', tip: 'Listen to calming music or nature sounds to reduce stress hormones.' }
                ];

                tips.push(generalTips[Math.floor(Math.random() * generalTips.length)]);
            }

            renderTips(tips);
        }

        function renderTips(tips) {
            const tipsContainer = document.getElementById('wellnessTips');
            tipsContainer.innerHTML = tips.map(tip => `
                <div class="tip-card">
                    <strong>${tip.icon} ${tip.type}:</strong> ${tip.tip}
                </div>
            `).join('');
        }

        // Enhanced history loading with sentiment visualization
        function loadCheckInHistory() {
            const historyContainer = document.getElementById('checkInHistory');

            if (checkInData.length === 0) {
                historyContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.7);">
                        <h3>🌟 Start Your Wellness Journey</h3>
                        <p>Complete your first check-in to begin tracking your mental health patterns!</p>
                    </div>
                `;
                return;
            }

            historyContainer.innerHTML = checkInData.slice(0, 10).map((entry, index) => {
                const date = new Date(entry.date);
                const sentiment = entry.sentiment || { sentiment: 'neutral', confidence: 0 };

                return `
                    <div class="history-item" style="animation-delay: ${index * 0.1}s">
                        <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 10px;">
                            <div style="font-size: 0.9rem; color: #666;">
                                ${date.toLocaleDateString()} at ${date.toLocaleTimeString()}
                            </div>
                            <span class="sentiment-badge sentiment-${sentiment.sentiment}">
                                ${sentiment.sentiment} (${Math.round(sentiment.confidence * 100)}% confidence)
                            </span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-bottom: 10px;">
                            <div><strong>Mood:</strong> ${entry.mood} (${entry.moodScore}/10)</div>
                            <div><strong>Sleep:</strong> ${entry.sleepQuality}/10</div>
                            <div><strong>Stress:</strong> ${entry.stressLevel}/10</div>
                            <div><strong>Energy:</strong> ${entry.energyLevel}/10</div>
                        </div>
                        ${entry.thoughts ? `
                            <div style="margin-top: 12px; padding: 10px; background: rgba(79, 172, 254, 0.1); border-radius: 8px; font-style: italic; border-left: 3px solid #4facfe;">
                                "${entry.thoughts.length > 150 ? entry.thoughts.substring(0, 150) + '...' : entry.thoughts}"
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // Enhanced alert system
        function showAlert(message, type) {
            // Remove existing alerts
            const existingAlerts = document.querySelectorAll('.alert');
            existingAlerts.forEach(alert => alert.remove());

            const alert = document.createElement('div');
            alert.className = `alert ${type}`;
            alert.textContent = message;

            document.body.appendChild(alert);

            setTimeout(() => {
                alert.style.animation = 'slideInRight 0.5s ease-out reverse';
                setTimeout(() => alert.remove(), 500);
            }, 4000);
        }

        // Check daily check-in with smart reminders
        function checkDailyCheckIn() {
            const today = new Date().toDateString();
            const hasCheckedInToday = checkInData.some(entry =>
                new Date(entry.date).toDateString() === today
            );

            if (!hasCheckedInToday && checkInData.length > 0) {
                setTimeout(() => {
                    showAlert('🌟 Daily wellness check-in awaiting! Consistency builds mental resilience.', 'warning');
                }, 2000);
            }

            // Streak celebration
            if (userStats.streak >= 7) {
                setTimeout(() => {
                    showAlert(`🎉 Amazing! ${userStats.streak}-day wellness streak! You're building incredible habits!`, 'success');
                }, 3000);
            }
        }

        // Reset form with animations
        function resetForm() {
            document.querySelectorAll('.mood-btn').forEach(btn => {
                btn.classList.remove('selected');
                btn.style.transform = '';
            });
            selectedMood = null;

            document.getElementById('sleepQuality').value = 7;
            document.getElementById('stressLevel').value = 5;
            document.getElementById('energyLevel').value = 6;
            document.getElementById('dailyThoughts').value = '';

            // Update displays
            document.getElementById('sleepValue').textContent = '7';
            document.getElementById('stressValue').textContent = '5';
            document.getElementById('energyValue').textContent = '6';

            // Reset slider gradients
            updateSliderValues();
        }

        // Advanced mood pattern recognition
        function analyzeMoodPatterns() {
            if (checkInData.length < 7) return null;

            const weekData = checkInData.slice(0, 7);
            const moodTrend = weekData.reduce((acc, entry, index) => {
                if (index === 0) return 0;
                return acc + (entry.moodScore - weekData[index - 1].moodScore);
            }, 0);

            return {
                trend: moodTrend > 0 ? 'improving' : moodTrend < 0 ? 'declining' : 'stable',
                volatility: calculateVolatility(weekData.map(d => d.moodScore)),
                avgMood: weekData.reduce((sum, d) => sum + d.moodScore, 0) / weekData.length
            };
        }

        function calculateVolatility(values) {
            const mean = values.reduce((sum, val) => sum + val, 0) / values.length;
            const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length;
            return Math.sqrt(variance);
        }

        // Delete history functionality
        function showDeleteConfirmation() {
            if (checkInData.length === 0) {
                showAlert('No history to delete! 📭', 'info');
                return;
            }

            document.getElementById('confirmationModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('confirmationModal').classList.remove('active');
        }

        function confirmDelete() {
            // Clear all stored data
            checkInData = [];
            userStats = {
                streak: 0,
                totalCheckIns: 0,
                avgMood: 0,
                avgSleep: 0,
                avgStress: 0,
                avgEnergy: 0
            };

            // Update localStorage
            localStorage.removeItem('mindcare_checkins');
            localStorage.removeItem('mindcare_stats');

            // Update UI
            loadCheckInHistory();
            updateDashboard();
            generatePersonalizedTips();
            updateChart();

            // Close modal and show confirmation
            closeModal();
            showAlert('All history has been successfully deleted! 🗑️', 'info');

            // Hide AI insights if they were showing
            document.getElementById('aiInsight').style.display = 'none';
        }

        // Close modal when clicking outside
        document.getElementById('confirmationModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>

</html>